/* eslint-disable no-console */
const { CloudWatchClient, PutMetricDataCommand } = require( "@aws-sdk/client-cloudwatch")

const CLIENT_CONFIG = { region: process.env.AWS_REGION };

async function createCustomMetric(Value) {
    const MetricName = process.env.MetricName
    const Namespace = process.env.Namespace
    const client = new CloudWatchClient(CLIENT_CONFIG);
    const input = {
        MetricData: [{
            MetricName,
            Value
        }],
        Namespace,
    }
    const command = new PutMetricDataCommand(input);
    try {
        const data = await client.send(command);
        console.log(data)
    } catch (error) {
        console.log(error)
    }
}
module.exports = { createCustomMetric };
